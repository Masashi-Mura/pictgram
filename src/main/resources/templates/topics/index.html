<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/layout}">
  <head>
	  <title>Pictgram</title>
  </head>
  
  <body>
	  <div class="topics-index-wrapper" layout:fragment="contents">
		  <div class="container">
			  <div class="row" th:each="topic : ${list}">
				  <div class="col-md-6 mx-auto">
					  <main>
						  <!-- 投稿者名-->
						  <h2 class="author" th:text="${topic.user.name}"></h2>
						  <!-- 画像又はパスの表示-->
						  <img src="" th:if="${@environment.getProperty('image.local')}"
						    th:src="${topic.imageData}" class="image" />

						  <img src="" th:unless="${@environment.getProperty('image.local')}" 
						  		th:src="${topic.path}" class="image" />
						  		
							  <!-- お気に入りアイコン条件分岐 -->
							  <div class="icons">
								  <!-- お気に入り登録済アイコン -->
								  <a th:if="${topic.favorite != null}" rel="nofollow" class="icon convert"
								    data-method="delete" href="/favorite?topic_id=1" th:href="@{'/favorite'}"
								    th:data-topic_id="${topic.id}" th:data-_csrf="${_csrf.token}">
									<img class="favorite-on" src="/images/icons/heart.png" th:src="@{/images/icons/heart.png}" />  
								  </a>
								  <!-- お気に入り未登録アイコン -->
								  <a th:if="${topic.favorite == null}" rel="nofollow" class="icon convert"
								    data-method="post" href="/favorite?topic_id=1" th:href="@{'/favorite'}" 
								    th:data-topic_id="${topic.id}" th:data-_csrf="${_csrf.token}">
								    <img src="/images/icons/heart-blank.png" th:src="@{/images/icons/heart-black.png}" />
								  </a>
								  <span class="cuont" th:text="${#lists.size(topic.favorites)}">0</span>  
							  </div>
								
						  <pre class="description" th:text="${topic.description}"></pre>
					  </main>
				  </div>
			  </div>
		  </div>
	  </div>
  </body>
  </html>